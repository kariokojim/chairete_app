{% extends "base.html" %}
{% block content %}

<div class="container-fluid mt-4">
    <h2 class="mb-4 fw-bold text-primary">Admin Dashboard</h2>
    <!-- SUMMARY CARDS -->
    <div class="row g-4">
        <!-- Total Members -->
        <div class="col-md-3 col-sm-6">
            <div class="card shadow-lg border-0 text-center" style="background:linear-gradient(135deg,#e3f2fd,#bbdefb);">
                <div class="card-body py-4">
                    <div class="display-6 mb-2">üë•</div>
                    <h5 class="fw-bold text-primary">Members</h5>
                    <h3 class="fw-bold">{{ total_members }}</h3>
                </div>
            </div>
        </div>
        <!-- Savings -->
        <div class="col-md-3 col-sm-6">
            <div class="card shadow-lg border-0 text-center" style="background:linear-gradient(135deg,#e8f5e9,#c8e6c9);">
                <div class="card-body py-4">
                    <div class="display-6 mb-2">üí∞</div>
                    <h5 class="fw-bold text-success">Total Savings</h5>
                    <h3 class="fw-bold">KSh {{ total_savings }}</h3>
                </div>
            </div>
        </div>
        <!-- Loans -->
        <div class="col-md-3 col-sm-6">
            <div class="card shadow-lg border-0 text-center" style="background:linear-gradient(135deg,#ffebee,#ffcdd2);">
                <div class="card-body py-4">
                    <div class="display-6 mb-2">üè¶</div>
                    <h5 class="fw-bold text-danger">Total Loans</h5>
                    <h3 class="fw-bold">KSh {{ total_loans }}</h3>
                </div>
            </div>
        </div>

        <!-- Share Capital -->
        <div class="col-md-3 col-sm-6">
            <div class="card shadow-lg border-0 text-center" style="background:linear-gradient(135deg,#fff8e1,#ffe082);">
                <div class="card-body py-4">
                    <div class="display-6 mb-2">üíº</div>
                    <h5 class="fw-bold text-warning">Share Capital</h5>
                    <h3 class="fw-bold">KSh {{ total_share_capital }}</h3>
                </div>
            </div>
        </div>
    </div>
		
    <!-- KPI ROW 2 -->
    <div class="row g-4 mt-4">

        <!-- Members Zero Balance -->
        <div class="col-md-3 col-sm-6">
            <div class="card shadow-lg border-0 text-center" style="background:linear-gradient(135deg,#ede7f6,#d1c4e9);">
                <div class="card-body py-4">
                    <div class="display-6 mb-2">üßÆ</div>
                    <h5 class="fw-bold text-purple">Zero Balance Members</h5>
                    <h3 class="fw-bold">{{ members_zero_balance }}</h3>
                </div>
            </div>
        </div>

        <!-- Installment Due -->
        <div class="col-md-3 col-sm-6">
            <div class="card shadow-lg border-0 text-center" style="background:linear-gradient(135deg,#e0f7fa,#b2ebf2);">
                <div class="card-body py-4">
                    <div class="display-6 mb-2">üìÖ</div>
                    <h5 class="fw-bold text-info">Installment Due (This Month)</h5>
                    <h3 class="fw-bold">KSh {{ installment_due }}</h3>
                </div>
            </div>
        </div>

        <!-- Principal Arrears -->
        <div class="col-md-3 col-sm-6">
            <div class="card shadow-lg border-0 text-center" style="background:linear-gradient(135deg,#ffe0b2,#ffcc80);">
                <div class="card-body py-4">
                    <div class="display-6 mb-2">‚ö†Ô∏è</div>
                    <h5 class="fw-bold text-warning">Principal Arrears</h5>
                    <h3 class="fw-bold">KSh {{ principal_arrears }}</h3>
                </div>
            </div>
        </div>

        <!-- Interest Arrears -->
        <div class="col-md-3 col-sm-6">
            <div class="card shadow-lg border-0 text-center" style="background:linear-gradient(135deg,#ffebee,#ffcdd2);">
                <div class="card-body py-4">
                    <div class="display-6 mb-2">üí∏</div>
                    <h5 class="fw-bold text-danger">Interest Arrears</h5>
                    <h3 class="fw-bold">KSh {{ interest_arrears }}</h3>
                </div>
            </div>
        </div>

    </div>

    <!-- KPI ROW 3 -->
    <div class="row g-4 mt-4">

        <!-- Loans Not Paid 2 Months -->
        <div class="col-md-3 col-sm-6">
            <div class="card shadow-lg border-0 text-center" style="background:linear-gradient(135deg,#fce4ec,#f8bbd0);">
                <div class="card-body py-4">
                    <div class="display-6 mb-2">‚è≥</div>
                    <h5 class="fw-bold text-danger">Loans Not Paid (2 Months)</h5>
                    <h3 class="fw-bold">{{ loans_not_paid_2_months }}</h3>
                </div>
            </div>
        </div>
		<div class="col-md-3 col-sm-6">
  <div class="card shadow-lg border-0 text-center" style="background:linear-gradient(135deg,#fce4ec,#f8bbd0);
    {% if par_percentage < 5 %}border-success
    {% elif par_percentage < 10 %}border-warning
    {% else %}border-danger{% endif %}">

     <div class="card-body py-4">
      <h6 class="text-muted mb-1">Portfolio at Risk (PAR %)</h6>
      <h3 class="
        {% if par_percentage < 5 %}text-success
        {% elif par_percentage < 10 %}text-warning
        {% else %}text-danger{% endif %}
      ">
        {{ par_percentage }}%
      </h3>
      <small class="text-muted">
        Risk: {{ "{:,.2f}".format(portfolio_at_risk) }} <br>
        Portfolio: {{ "{:,.2f}".format(total_portfolio) }}
      </small>

      <div class="mt-2">
        <a href="{{ url_for('admin.loan_par_view') }}"
           class="stretched-link"></a>
      </div>
    </div>
  </div>
</div>
    </div>

</div>

{% endblock %}
