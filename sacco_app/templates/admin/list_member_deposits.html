{% extends "base.html" %}
{% block title %}Member Deposit Report{% endblock %}
{% block content %}
<div class="container mt-4">
  <h4 class="mb-3">Member Deposit Report</h4>
  
<form method="POST" action="{{ url_for('admin.list_member_deposits') }}">
    {{ form.hidden_tag() }}
    
    <div class="form-group">
        <label>Member No:</label>
        {{ form.member_no(class="form-control") }}
    </div>

    <div class="form-group">
        <label>Start Date:</label>
        {{ form.start_date(class="form-control") }}
    </div>

    <div class="form-group">
        <label>End Date:</label>
        {{ form.end_date(class="form-control") }}
    </div>

    <button type="submit" class="btn btn-primary">Search</button>
</form>


  {% if deposits %}
    <h5>Results for {{ member.name }} ({{ member_no }})</h5>
    <table class="table table-bordered table-hover mt-3">
      <thead class="table-dark">
        <tr>
          <th>Date</th>
          <th>Account No</th>
          <th>Description</th>
          <th>Debit</th>
          <th>Credit</th>
          <th>Balance</th>
        </tr>
      </thead>
      <tbody>
        {% for d in deposits %}
        <tr>
          <td>{{ d.bank_txn_date.strftime('%Y-%m-%d') }}</td>
          <td>{{ d.account_no }}</td>
          <td>{{ d.narration }}</td>
          <td class="text-end">{{ "%.2f"|format(d.debit_amount or 0) }}</td>
          <td class="text-end">{{ "%.2f"|format(d.credit_amount or 0) }}</td>
          <td class="text-end">{{ "%.2f"|format(d.running_balance or 0) }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% elif member_no %}
    <div class="alert alert-warning">No deposits found for this member and date range.</div>
  {% endif %}
</div>
{% endblock %}
